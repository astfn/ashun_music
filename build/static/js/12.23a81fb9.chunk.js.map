{"version":3,"sources":["assets/images/login_bgImg.png","utils/setFormState.js","pages/login/style.js","pages/login/index.js"],"names":["setFormState","name","stateArr","newVal","index","findIndex","val","setState","login_bgImg","require","default","LoginWrapper","styled","div","ASLogin","props","useState","phone","setPhone","password","setPassword","dispatch","useDispatch","user","useGetUserFromStore","toJS","currentUser","FormStates","handelChangeForm","e","target","value","handleLogin","findUser","users","find","v","changeUserAction","toggleIsLoginAction","alert","id","className","onChange","type","placeholder","onClick","history","replace","withRouter","memo"],"mappings":"6GAAA,OAAe,cAA0B,yC,iCCAlC,SAASA,EAAaC,EAAMC,EAAUC,GAC3C,IAAMC,EAAQF,EAASG,WAAU,SAACC,GAAD,OAASA,EAAIL,OAASA,MACxC,IAAXG,GACJF,EAASE,GAAOG,SAASJ,GAH3B,mC,6FCEMK,EAAcC,EAAQ,KAAmCC,QAElDC,EAAeC,IAAOC,IAAV,mnHAGLL,G,iCCOdM,EAAU,SAACC,GACf,MAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAGMC,EAAWC,cACXC,EAAOC,cAAsBC,OAC3BC,EAAgBH,EAAhBG,YAKFC,EAAa,CACjB,CAAE1B,KAAM,QAASM,SAAUW,GAC3B,CAAEjB,KAAM,WAAYM,SAAUa,IAE1BQ,EAAmB,SAACC,GACxB7B,YAAa6B,EAAEC,OAAO7B,KAAM0B,EAAYE,EAAEC,OAAOC,QAG7CC,EAAc,WAClB,GAAKf,GAAUE,EAIf,GAAIF,IAAUS,EAAYT,MAA1B,CAKA,IAAMgB,EAAWV,EAAKW,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEnB,QAAUA,KAC/CgB,EAICA,EAASd,WAAaA,GAI1BE,EAASgB,YAAiBpB,IAC1BI,EAASiB,aAAoB,IAC7BC,MAAM,6BALJA,MAAM,kCAJRA,MAAM,mDANNA,MAAM,yDAJNA,MAAM,oCAoEV,OACE,cAAC5B,EAAD,UACE,sBAAK6B,GAAG,WAAR,UACE,2BACA,gDA/CF,iCACE,sBAAKC,UAAU,OAAf,UACE,qBAAKA,UAAU,gBAAf,gCACA,qBAAKA,UAAU,gBAAf,SACE,uBACEV,MAAOd,EACPyB,SAAU,SAACb,GAAD,OAAOD,EAAiBC,IAClC5B,KAAK,QACL0C,KAAK,OACLC,YAAY,8CAIlB,sBAAKH,UAAU,OAAf,UACE,qBAAKA,UAAU,gBAAf,0BACA,qBAAKA,UAAU,gBAAf,SACE,uBACEV,MAAOZ,EACPuB,SAAU,SAACb,GAAD,OAAOD,EAAiBC,IAClC5B,KAAK,WACL0C,KAAK,WACLC,YAAY,wCAIlB,sBAAKH,UAAU,OAAf,UACE,qBAAKA,UAAU,SAAf,SACE,wBAAQE,KAAK,SAASE,QAASb,EAA/B,4BAIF,sBACES,UAAU,WACVI,QAAS,WACP9B,EAAM+B,QAAQC,QAAQ,cAH1B,sCAuBKC,sBAAWC,eAAKnC","file":"static/js/12.23a81fb9.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/login_bgImg.5121d07c.png\";","export function setFormState(name, stateArr, newVal) {\r\n  const index = stateArr.findIndex((val) => val.name === name);\r\n  if (index === -1) return;\r\n  stateArr[index].setState(newVal);\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nconst login_bgImg = require(\"@/assets/images/login_bgImg.png\").default;\r\n\r\nexport const LoginWrapper = styled.div`\r\n  width: 100%;\r\n  min-height: 800px;\r\n  background: url(${login_bgImg}) no-repeat;\r\n  background-size: cover;\r\n  overflow: hidden;\r\n  #loginBox {\r\n    margin: 0 auto;\r\n    margin-top: 200px;\r\n    width: 45%;\r\n    max-width: 500px;\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background: rgba(255, 255, 255, 0.3);\r\n    border-radius: 10px;\r\n    box-shadow: 0px 0px 2px white;\r\n    transition: 0.5s;\r\n    backdrop-filter: blur(3px);\r\n    box-shadow: 0px 0px 30px white;\r\n  }\r\n\r\n  #loginBox > header {\r\n    width: 200px;\r\n    height: 170px;\r\n    margin: 0 auto;\r\n    margin-bottom: 70px;\r\n    background-image: url(\"https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/normal.0447fe9.png\");\r\n    background-repeat: no-repeat;\r\n    background-size: contain;\r\n    position: absolute;\r\n    transform: translateY(-110%);\r\n  }\r\n  #loginBox:focus-within {\r\n    box-shadow: 0px 0px 50px white;\r\n    transform: translateY(-10px);\r\n  }\r\n  #loginBox:focus-within > header {\r\n    background-image: url(\"https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/blindfold.58ce423.png\");\r\n  }\r\n\r\n  #loginBox form {\r\n    margin: 20px 10px;\r\n    min-height: 150px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n  }\r\n  strong {\r\n    margin-top: 45px;\r\n    font-size: 25px;\r\n    color: white;\r\n    text-shadow: 4px 4px 5px var(--color-light), 1px 1px 10px var(--color-deep),\r\n      -1px -1px 10px var(--color-light), -4px -4px 5px var(--color-deep);\r\n\r\n    letter-spacing: 10px;\r\n  }\r\n  .rows {\r\n    flex: 1;\r\n    padding: 5px;\r\n  }\r\n  .label {\r\n    text-align: left;\r\n    color: white;\r\n    text-shadow: 2px 2px 3px var(--color-light), 1px 1px 5px var(--color-deep),\r\n      -1px -1px 5px var(--color-light), -2px -2px 3px var(--color-deep);\r\n  }\r\n  .columns.input,\r\n  input {\r\n    min-width: 200px;\r\n  }\r\n  .columns.input {\r\n    min-height: 35px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n    position: relative;\r\n    background: white;\r\n  }\r\n  .columns.input::before {\r\n    content: \"\";\r\n    width: 100%;\r\n    height: 2px;\r\n    position: absolute;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    background: linear-gradient(\r\n      to right,\r\n      white,\r\n      #f70938,\r\n      #f70938,\r\n      #ffff00,\r\n      #33ff00,\r\n      #00ccff,\r\n      white\r\n    );\r\n    transform: translateX(-100%);\r\n    transition: 0.8s;\r\n  }\r\n  .columns.input:hover::before {\r\n    transform: translateX(0%);\r\n  }\r\n  .columns.input > input {\r\n    height: 33px;\r\n    outline: none;\r\n    border: none;\r\n    margin-left: 8px;\r\n  }\r\n\r\n  .btnBox {\r\n    margin: 0 auto;\r\n    position: relative;\r\n    margin: 10px;\r\n    width: 60px;\r\n    height: 100%;\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n\r\n    button {\r\n      padding: 10px 2px;\r\n      width: 100%;\r\n      height: 100%;\r\n      color: white;\r\n      font-weight: bold;\r\n      font-size: 16px;\r\n      cursor: pointer;\r\n\r\n      background: linear-gradient(\r\n        to right,\r\n        var(--color-shallow),\r\n        var(--color-near-white),\r\n        var(--color-middle),\r\n        var(--color-shallow)\r\n      );\r\n      background-size: 200% 100%;\r\n      animation: btnAnimate 2s linear infinite;\r\n    }\r\n\r\n    @keyframes btnAnimate {\r\n      100% {\r\n        background-position: -200% 0;\r\n      }\r\n    }\r\n  }\r\n  .register {\r\n    display: inline-block;\r\n    width: 100%;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #eee;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      color: #fff;\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n`;\r\n","import { memo, useState } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport { LoginWrapper } from \"./style.js\";\r\n\r\nimport { setFormState } from \"@/utils/setFormState.js\";\r\nimport {\r\n  changeUserAction,\r\n  toggleIsLoginAction,\r\n} from \"@/store/user/actionCreators.js\";\r\n\r\nimport { useGetUserFromStore } from \"@/common/hooks/store-related.js\";\r\n\r\nconst ASLogin = (props) => {\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  /* redux hooks */\r\n  const dispatch = useDispatch();\r\n  const user = useGetUserFromStore().toJS();\r\n  const { currentUser } = user;\r\n\r\n  /* 其它hook */\r\n\r\n  /* 其他业务 */\r\n  const FormStates = [\r\n    { name: \"phone\", setState: setPhone },\r\n    { name: \"password\", setState: setPassword },\r\n  ];\r\n  const handelChangeForm = (e) => {\r\n    setFormState(e.target.name, FormStates, e.target.value);\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    if (!phone || !password) {\r\n      alert(\"不要偷懒哦~\");\r\n      return;\r\n    }\r\n    if (phone === currentUser.phone) {\r\n      alert(\"您已在登陆状态！\");\r\n      return;\r\n    }\r\n\r\n    const findUser = user.users.find((v) => v.phone === phone);\r\n    if (!findUser) {\r\n      alert(\"该用户不存在！\");\r\n      return;\r\n    } else {\r\n      if (findUser.password !== password) {\r\n        alert(\"密码错误！\");\r\n        return;\r\n      }\r\n      dispatch(changeUserAction(phone));\r\n      dispatch(toggleIsLoginAction(true));\r\n      alert(\"登陆成功\");\r\n    }\r\n  };\r\n  /* render相关 */\r\n  const renderForm = () => {\r\n    return (\r\n      <form>\r\n        <div className=\"rows\">\r\n          <div className=\"columns label\">手机号</div>\r\n          <div className=\"columns input\">\r\n            <input\r\n              value={phone}\r\n              onChange={(e) => handelChangeForm(e)}\r\n              name=\"phone\"\r\n              type=\"text\"\r\n              placeholder=\"请输入手机号\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"rows\">\r\n          <div className=\"columns label\">密码</div>\r\n          <div className=\"columns input\">\r\n            <input\r\n              value={password}\r\n              onChange={(e) => handelChangeForm(e)}\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入密码\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"rows\">\r\n          <div className=\"btnBox\">\r\n            <button type=\"button\" onClick={handleLogin}>\r\n              登录\r\n            </button>\r\n          </div>\r\n          <span\r\n            className=\"register\"\r\n            onClick={() => {\r\n              props.history.replace(\"/register\");\r\n            }}\r\n          >\r\n            注册\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  };\r\n  return (\r\n    <LoginWrapper>\r\n      <div id=\"loginBox\">\r\n        <header></header>\r\n        <strong>AshunMusic</strong>\r\n        {renderForm()}\r\n      </div>\r\n    </LoginWrapper>\r\n  );\r\n};\r\n\r\nexport default withRouter(memo(ASLogin));\r\n"],"sourceRoot":""}